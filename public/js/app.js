$(()=>{let e={restriction:void 0,filter:void 0,ingredient1:void 0,ingredient2:void 0,ingredient3:void 0};const t=async()=>{const t=$(".door"),i=$(".handle");Object.keys(e).forEach(t=>e[t]=void 0),$(".fridge").find(".dropdown-menu .show").removeClass("show"),$(".fridge").find("input").val(""),$(".restriction").text("No filter"),$(".filter").text("No filter"),i.addClass("open");let n=new Promise(e=>setTimeout(()=>e(i.removeClass("open")),300)),o=new Promise(e=>setTimeout(()=>e(),600));await n,await o,t.toggleClass("open")},i=e=>{let t=n(),i=void 0===e.filter?"":`&diet=${e.filter.toLowerCase()}`,r=void 0===e.restriction?"":`&health=${e.restriction.toLowerCase()}`;console.log(i),console.log(r);let a=`https://api.edamam.com/search?q=${t}&app_id=fd3ea657&app_key=a61ca3c11d3b2ec930779e11cfe06c85${i}${r}&from=0&to=100`;console.log(a),fetch(a,{cache:"no-store",mode:"cors",redirect:"follow",headers:{"Accept-Encoding":"gzip"}}).then(e=>e.json()).then(e=>{console.log(e),o(e)}).catch(e=>alert("You must wait up to minute before next search"))},n=()=>{let t=[],i="";return void 0!==e.ingredient1&&t.push(e.ingredient1),void 0!==e.ingredient2&&t.push(e.ingredient2),void 0!==e.ingredient3&&t.push(e.ingredient3),3===t.length&&(i=`${t[0]}+${t[1]}+${t[2]}`),2===t.length&&(i=`${t[0]}+${t[1]}`),1===t.length&&(i=`${t[0]}`),i},o=e=>{let t=0+(e.hits.length>5?5:e.hits.length)-1,i=r(e.hits.length);0===e.hits.length?alert("oops, coudnt find anything"):l(e,0,t,i)},r=e=>e<=5?0:Math.floor(Math.random()*(e-4)),a=(e,t,i,n)=>{l(e,t,i,n)},l=(e,t,i,n)=>{let o=e.hits[n+t].recipe,r=new Image,l=Math.round(o.calories/o.yield),c=t+1;const d=$(".card");$(".btn-prev").off(),$(".btn-next").off(),s(),new Promise(e=>{d.css("display","block"),e()}).then(($(".card").removeClass("animate"),void setTimeout(function(){$(".card").addClass("animate")},10))),r.src=o.image,r.onload=$(".card-image").css("background-image",`url(${r.src})`),$(".card-title").text(o.label),$(".group-info .info-1").text(`Servings: ${o.yield}`),$(".group-info .info-2").text(`Cal/Serving: ${l}`),$(".index").text(`${c}/${e.hits.length>5?5:e.hits.length}`),$(".card a.btn").attr("href",o.url);for(let e=0;e<o.ingredients.length;e++)$(".card-body .ingredients").append(`<li>- ${o.ingredients[e].text}</li>`);e.hits.length>1&&($(".btn-prev").on("click",()=>{a(e,t>i-4?--t:t=i,i,n)}),$(".btn-next").on("click",()=>{t<i?(c++,a(e,++t,i,n)):(c=1,a(e,t=i-4,i,n))}))},s=()=>{$("ul.ingredients").empty()};$("a.dropdown-item").on("click",function(){$(this).parent().prev().text($(this).text())}),$(".fa-times-circle").on("click",function(){$(this).prev().val(""),e.ingredient1=this.previousElementSibling.id.includes("1")?void 0:e.ingredient1,e.ingredient2=this.previousElementSibling.id.includes("2")?void 0:e.ingredient2,e.ingredient3=this.previousElementSibling.id.includes("3")?void 0:e.ingredient3}),$(".search").on("click",()=>{e.restriction="No filter"===$(".restriction").text()?void 0:$(".restriction").text(),e.filter="No filter"===$(".filter").text()?void 0:$(".filter").text(),e.ingredient1=""===$("#ingredient-1").val()?void 0:$("#ingredient-1").val(),e.ingredient2=""===$("#ingredient-2").val()?void 0:$("#ingredient-2").val(),e.ingredient3=""===$("#ingredient-3").val()?void 0:$("#ingredient-3").val(),console.log(e.restriction),i(e),t()}),$(".lucky").on("click",()=>{t();let n=["potato","salad","steak","tuna","salmon","cod","shrimps","rocket","spinach","onion","mushroom","leek","pumpkin","peas","bean","beans","cucumber","zucchini","garlic","broccoli","cauliflower","capers","carrot","beetroot","cabbage","asparagus","avocado","eggplant","rice","oats","buckwheat","black beans","chickpeas","millet","lentil","chicken","beef","turkey","duck","breast","pork","ham","mutton","chops","milk","cream","cheddar","yogurt","cottage","butter","mango","strawberry","orange","lemon","lime","coconut","banana","peach","olive","almonds","sesame","walnuts"],o=n[Math.floor(Math.random()*n.length)];e.ingredient1=o,i(e)}),$(".door").on("click",t)});
//# sourceMappingURL=app.js.map
